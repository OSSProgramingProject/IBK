<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <title>문제 업로드</title>
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        .title-box {
            background-color: #007bff;
            color: white;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            margin-bottom: 30px;
        }
        .form-section {
            border: 1px solid #ddd;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 30px;
            background-color: #f9f9f9;
        }
        .form-section h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
        }
        .preview-section {
            border: 1px solid #007bff;
            padding: 20px;
            border-radius: 5px;
            background-color: #e9f7ff;
            margin-top: 30px;
        }
        .preview-section h2 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #007bff;
        }
        .preview-image {
            max-height: 200px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
            <!-- Navigation-->
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
                <div class="container px-5">
                    <a class="navbar-brand" href="home.html">Start ideabank</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                            <li class="nav-item"><a class="nav-link" href="home.html">Home</a></li>
                            <li class="nav-item"><a class="nav-link" href="login.html">Login</a></li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" id="navbarDropdownUserManagement" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">User Management</a>
                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdownUserManagement">
                                    <li><a class="dropdown-item" href="profile-management.html">Profile Management</a></li>
                                    <li><a class="dropdown-item" href="UserProblem.html">Problem Solving</a></li>
                                </ul>
                            </li>
                            <li class="nav-item"><a class="nav-link" href="problem-creation.html">Problem Creation</a></li>
                            <li class="nav-item"><a class="nav-link" href="question-bank.html">Question Bank</a></li>
                            <li class="nav-item"><a class="nav-link" href="community.html">Community</a></li>
                            <li class="nav-item"><a class="nav-link" href="blog-post.html">Blog</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
    <!-- 메인 콘텐츠 -->
    <div class="container py-5">
        <!-- 제목 -->
        <div class="title-box">
            <h1>새 문제 업로드</h1>
        </div>

        <!-- 문제 업로드 폼 -->
        <form id="problemForm">
            <!-- 문제 제목 -->
            <div class="form-section" id="problem-title-section">
                <h2>문제 제목</h2>
                <input type="text" class="form-control" id="problemTitle" placeholder="문제 제목을 입력하세요" required />
            </div>

            <!-- 문제 설명 -->
            <div class="form-section" id="problem-description-section">
                <h2>문제 설명</h2>
                <textarea class="form-control" id="problemDescription" rows="4" placeholder="문제 설명을 입력하세요"></textarea>
            </div>

            <!-- 문제 선택지 -->
            <div class="form-section" id="problem-options-section">
                <h2>선택지</h2>
                <p class="text-muted">선택지는 최대 4개까지 입력하세요:</p>
                <input type="text" class="form-control mb-2" id="option1" placeholder="선택지 1" />
                <input type="text" class="form-control mb-2" id="option2" placeholder="선택지 2" />
                <input type="text" class="form-control mb-2" id="option3" placeholder="선택지 3" />
                <input type="text" class="form-control mb-2" id="option4" placeholder="선택지 4" />
            </div>

            <!-- 이미지 업로드 -->
            <div class="form-section" id="image-upload-section">
                <h2>이미지 업로드</h2>
                <input type="file" class="form-control" id="problemImage" accept="image/*" />
            </div>

            <!-- 카테고리 선택 -->
            <div class="form-section" id="category-selection-section">
                <h2>카테고리</h2>
                <select class="form-select" id="categorySelect">
                    <option selected disabled>카테고리 선택</option>
                    <option value="math">수학</option>
                    <option value="science">과학</option>
                    <option value="programming">프로그래밍</option>
                    <option value="general">일반 상식</option>
                </select>
            </div>

            <!-- 난이도 선택 -->
            <div class="form-section" id="difficulty-selection-section">
                <h2>난이도</h2>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="difficulty" id="difficultyEasy" value="Easy" />
                    <label class="form-check-label" for="difficultyEasy">쉬움</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="difficulty" id="difficultyMedium" value="Medium" />
                    <label class="form-check-label" for="difficultyMedium">중간</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="difficulty" id="difficultyHard" value="Hard" />
                    <label class="form-check-label" for="difficultyHard">어려움</label>
                </div>
            </div>

            <!-- 태그 입력 -->
            <div class="form-section" id="tag-input-section">
                <h2>태그</h2>
                <input type="text" class="form-control" id="problemTags" placeholder="태그를 쉼표로 구분하여 입력하세요" />
            </div>

            <!-- 제출 및 미리보기 버튼 -->
            <div class="text-center">
                <button type="button" class="btn btn-primary" id="previewBtn">문제 미리보기</button>
                <button type="button" class="btn btn-success ms-3" id="submitBtn">문제 제출</button>
            </div>
        </form>

        <!-- 문제 미리보기 -->
        <div class="preview-section d-none" id="previewSection">
            <h2>문제 미리보기</h2>
            <p><strong>제목:</strong> <span id="previewTitle"></span></p>
            <p><strong>설명:</strong> <span id="previewDescription"></span></p>
            <p><strong>선택지:</strong></p>
            <ul id="previewOptions"></ul>
            <p><strong>카테고리:</strong> <span id="previewCategory"></span></p>
            <p><strong>난이도:</strong> <span id="previewDifficulty"></span></p>
            <p><strong>태그:</strong> <span id="previewTags"></span></p>
            <p><strong>이미지:</strong></p>
            <img id="previewImage" class="preview-image d-none" alt="업로드된 문제 이미지" />
        </div>
    </div>

    <script>
        document.getElementById("previewBtn").addEventListener("click", function () {
            // 입력 값 가져오기
            const title = document.getElementById("problemTitle").value;
            const description = document.getElementById("problemDescription").value;
            const options = ["option1", "option2", "option3", "option4"]
                .map(id => document.getElementById(id).value)
                .filter(option => option.trim() !== "");
            const category = document.getElementById("categorySelect").value || "없음";
            const difficulty = document.querySelector("input[name='difficulty']:checked")?.value || "없음";
            const tags = document.getElementById("problemTags").value.trim() || "없음";

            // 미리보기 업데이트
            document.getElementById("previewTitle").textContent = title;
            document.getElementById("previewDescription").textContent = description;
            document.getElementById("previewOptions").innerHTML = options.map(opt => `<li>${opt}</li>`).join("");
            document.getElementById("previewCategory").textContent = category;
            document.getElementById("previewDifficulty").textContent = difficulty;
            document.getElementById("previewTags").textContent = tags;

            // 이미지 미리보기
            const imageInput = document.getElementById("problemImage");
            const previewImage = document.getElementById("previewImage");
            if (imageInput.files && imageInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function (e) {
                    previewImage.src = e.target.result;
                    previewImage.classList.remove("d-none");
                };
                reader.readAsDataURL(imageInput.files[0]);
            } else {
                previewImage.classList.add("d-none");
            }

            // 미리보기 섹션 표시
            document.getElementById("previewSection").classList.remove("d-none");
        });

        document.getElementById("submitBtn").addEventListener("click", function () {
            // 입력 값 가져오기
            const title = document.getElementById("problemTitle").value;
            const description = document.getElementById("problemDescription").value;
            const options = ["option1", "option2", "option3", "option4"]
                .map(id => document.getElementById(id).value)
                .filter(option => option.trim() !== "");
            const category = document.getElementById("categorySelect").value || "없음";
            const difficulty = document.querySelector("input[name='difficulty']:checked")?.value || "없음";
            const tags = document.getElementById("problemTags").value.trim() || "없음";

            // 실제로 서버로 데이터를 보내는 코드가 이곳에 추가됩니다
            alert("문제가 제출되었습니다!");

            // 폼 초기화
            document.getElementById("problemForm").reset();
        });
    </script>
</body>
</html>
