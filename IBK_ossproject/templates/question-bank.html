{% extends 'base.html' %}

{% block title %}문제 은행 - Start ideabank{% endblock %}

{% block content %}
    <!-- Header-->
    <header class="py-5">
        <div class="container px-5">
            <div class="row justify-content-center">
                <div class="col-lg-8 col-xxl-6">
                    <div class="text-center my-5">
                        <h1 class="fw-bolder mb-3">Our mission is to make building websites easier for everyone.</h1>
                        <p class="lead fw-normal text-muted mb-4">Start Bootstrap was built on the idea that quality, functional website templates and themes should be available to everyone. Use our open source, free products, or support us by purchasing one of our premium products or services.</p>
                        <a class="btn btn-primary btn-lg" href="#scroll-target">Read our story</a>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Problem Bank Search Section-->
    <section class="py-5 bg-light" id="problem-search-section">
        <div class="container px-5 my-5">
            <div class="text-center">
                <h2 class="fw-bolder">Explore Problems</h2>
                <p class="lead fw-normal text-muted mb-5">Find problems by category, difficulty, tags, or keywords</p>
            </div>
            <!-- Problem Search Form-->
            <form id="problem-search-form">
                <div class="row gx-5">
                    <div class="col-md-4 mb-3">
                        <label for="categorySelect" class="form-label">Category</label>
                        <select id="categorySelect" class="form-select">
                            <option selected>All Categories</option>
                            <option value="math">Math</option>
                            <option value="science">Science</option>
                            <option value="history">History</option>
                            <option value="programming">Programming</option>
                        </select>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="difficultySelect" class="form-label">Difficulty</label>
                        <select id="difficultySelect" class="form-select">
                            <option selected>Any Difficulty</option>
                            <option value="easy">Easy</option>
                            <option value="medium">Medium</option>
                            <option value="hard">Hard</option>
                        </select>
                    </div>
                    <div class="col-md-4 mb-3">
                        <label for="tagInput" class="form-label">Tags</label>
                        <input type="text" class="form-control" id="tagInput" placeholder="Enter tags (e.g., algebra, arrays)" />
                    </div>
                </div>
                <div class="d-flex justify-content-center">
                    <button type="submit" class="btn btn-primary btn-lg">Search</button>
                </div>
            </form>
            <!-- Problem List (dynamically filled after search)-->
            <div id="problem-list" class="mt-5">
                <!-- Example Problem-->
                <div class="problem-item border p-4 mb-3 rounded">
                    <h5 class="fw-bolder">Problem Title 1</h5>
                    <p class="text-muted">Category: Math | Difficulty: Medium | Tags: Algebra, Linear Equations</p>
                    <p>Description of the problem...</p>
                    <a href="#" class="btn btn-link">View Problem</a>
                </div>
                <!-- More problems will be populated here-->
            </div>
        </div>
    </section>

    <!-- Custom JS for problem search-->
    <script>
        // Handling problem search
        document.getElementById("problem-search-form").addEventListener("submit", function(event) {
            event.preventDefault();

            const category = document.getElementById("categorySelect").value;
            const difficulty = document.getElementById("difficultySelect").value;
            const tags = document.getElementById("tagInput").value.trim();

            // Simulating problem filtering based on search criteria
            let filteredProblems = []; // This would be populated with actual filtered data based on your backend/API

            // For now, we'll display some mock problems as an example
            filteredProblems = [
                {
                    title: "Problem 1",
                    description: "Description of problem 1",
                    category: "Math",
                    difficulty: "Medium",
                    tags: ["Algebra", "Linear Equations"],
                },
                {
                    title: "Problem 2",
                    description: "Description of problem 2",
                    category: "Programming",
                    difficulty: "Hard",
                    tags: ["Algorithms", "Dynamic Programming"],
                },
            ];

            const problemList = document.getElementById("problem-list");
            problemList.innerHTML = ''; // Clear previous results

            filteredProblems.forEach(problem => {
                const problemItem = document.createElement("div");
                problemItem.classList.add("problem-item", "border", "p-4", "mb-3", "rounded");
                problemItem.innerHTML = `
                    <h5 class="fw-bolder">${problem.title}</h5>
                    <p class="text-muted">Category: ${problem.category} | Difficulty: ${problem.difficulty} | Tags: ${problem.tags.join(', ')}</p>
                    <p>${problem.description}</p>
                    <a href="#" class="btn btn-link">View Problem</a>
                `;
                problemList.appendChild(problemItem);
            });
        });
    </script>
{% endblock %}
